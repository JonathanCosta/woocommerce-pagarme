!function(e){"use strict";e(function(){function r(r){var t=null;if(l)return"undefined"!=typeof r&&"undefined"!=typeof r.data&&("undefined"==typeof r.data.preservePagarmeCheckoutSubmitValue||r.data.preservePagarmeCheckoutSubmitValue||(l=!1)),!0;if(!e("#payment_method_pagarme-credit-card").is(":checked"))return!0;if(0<e("input[name=pagarme_checkout_token]").length)return!0;if(1===e("input#terms").size()&&0===e("input#terms:checked").size())return!0;if(e("#createaccount").is(":checked")&&e("#account_password").length&&""===e("#account_password").val())return!0;if(t=e(e("#ship-to-different-address-checkbox").is(":checked")?".woocommerce-billing-fields .validate-required, .woocommerce-shipping-fields .validate-required":".woocommerce-billing-fields .validate-required"),t.size()){var n=!1;if(n=a())return!0}return!1}function a(){return("1"!==e("#billing_persontype").val()||e("#billing_cpf").val())&&("2"!==e("#billing_persontype").val()||e("#billing_company").val()&&e("#billing_cnpj").val())?void 0:!0}function t(e){return 0<e.length}function n(e){return e.replace(/[^\d]/g,"")}function i(r){var a,i={};return i.customerName=e.trim(e("#billing_first_name",r).val()+" "+e("#billing_last_name",r).val()),i.customerEmail=e("#billing_email",r).val(),t(e("#billing_address_1"))&&(i.customerAddressStreet=e("#billing_address_1").val(),i.customerAddressComplementary=e("#billing_address_2").val(),i.customerAddressZipcode=n(e("#billing_postcode").val()),t(e("#billing_number"))&&(i.customerAddressStreetNumber=e("#billing_number").val()),t(e("#billing_neighborhood"))&&(i.customerAddressNeighborhood=e("#billing_neighborhood").val())),t(e("#billing_phone"))&&(a=n(e("#billing_phone").val()),i.customerPhoneDdd=a.substr(0,2),i.customerPhoneNumber=a.substr(2)),t(e("#billing_persontype"))?"1"===e("#billing_persontype").val()?i.customerDocumentNumber=n(e("#billing_cpf").val()):(i.customerName=e("#billing_company").val(),i.customerDocumentNumber=n(e("#billing_cnpj").val())):t(e("#billing_cpf"))?i.customerDocumentNumber=n(e("#billing_cpf").val()):t(e("#billing_cnpj"))&&(i.customerName=e("#billing_company").val(),i.customerDocumentNumber=n(e("#billing_cnpj").val())),i}function o(){if(r())return!0;var a,t,n,o=e("form.checkout, form#order_review"),c=e("#pagarme-checkout-params",o);return a=new PagarMeCheckout.Checkout({encryption_key:wcPagarmeParams.encryptionKey,success:function(r){l=!0,e("input[name=pagarme_checkout_token]",o).remove(),o.append(e('<input name="pagarme_checkout_token" type="hidden" />').val(r.token)),o.submit()}}),t=wcPagarmeParams.checkoutPayPage?wcPagarmeParams.customerFields:i(o),n=e.extend({},{paymentMethods:"credit_card",customerData:!1,amount:c.data("total"),createToken:!0,interestRate:wcPagarmeParams.interestRate,maxInstallments:c.data("max_installment"),freeInstallments:wcPagarmeParams.freeInstallments,postbackUrl:wcPagarmeParams.postbackUrl,uiColor:wcPagarmeParams.uiColor},t),a.open(n),!1}var l=!1;e("form.checkout").on("click","#place_order",function(){return o()}),e("form.checkout").on("checkout_place_order_pagarme-credit-card",{preservePagarmeCheckoutSubmitValue:!0},r),e("form#order_review").submit(function(){return o()})})}(jQuery);