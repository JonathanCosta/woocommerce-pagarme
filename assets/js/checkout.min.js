!function(a){"use strict";a(function(){function b(b){var c=null;if(g)return"undefined"!=typeof b&&"undefined"!=typeof b.data&&("undefined"==typeof b.data.preservePagarmeCheckoutSubmitValue||b.data.preservePagarmeCheckoutSubmitValue||(g=!1)),!0;if(!a("#payment_method_pagarme-credit-card").is(":checked"))return!0;if(0<a("input[name=pagarme_checkout_token]").length)return!0;if(1===a("input#terms").size()&&0===a("input#terms:checked").size())return!0;if(a("#createaccount").is(":checked")&&a("#account_password").length&&""===a("#account_password").val())return!0;if(c=a(a("#ship-to-different-address-checkbox").is(":checked")?".woocommerce-billing-fields .validate-required, .woocommerce-shipping-fields .validate-required":".woocommerce-billing-fields .validate-required"),c.size()){var d=!1;if(c.each(function(){""===a(this).find("input.input-text, select").not(a("#account_password, #account_username")).val()&&(d=!0)}),d)return!0}return!1}function c(a){return 0<a.length}function d(a){return a.replace(/[^\d]/g,"")}function e(b){var e,f={};return f.customerName=a.trim(a("#billing_first_name",b).val()+" "+a("#billing_last_name",b).val()),f.customerEmail=a("#billing_email",b).val(),c(a("#billing_address_1"))&&(f.customerAddressStreet=a("#billing_address_1").val(),f.customerAddressComplementary=a("#billing_address_2").val(),f.customerAddressZipcode=d(a("#billing_postcode").val()),c(a("#billing_number"))&&(f.customerAddressStreetNumber=a("#billing_number").val()),c(a("#billing_neighborhood"))&&(f.customerAddressNeighborhood=a("#billing_neighborhood").val())),c(a("#billing_phone"))&&(e=d(a("#billing_phone").val()),f.customerPhoneDdd=e.substr(0,2),f.customerPhoneNumber=e.substr(2)),c(a("#billing_persontype"))?"1"===a("#billing_persontype").val()?f.customerDocumentNumber=d(a("#billing_cpf").val()):(f.customerName=a("#billing_company").val(),f.customerDocumentNumber=d(a("#billing_cnpj").val())):c(a("#billing_cpf"))?f.customerDocumentNumber=d(a("#billing_cpf").val()):c(a("#billing_cnpj"))&&(f.customerName=a("#billing_company").val(),f.customerDocumentNumber=d(a("#billing_cnpj").val())),f}function f(){if(b())return!0;var c,d,f,h=a("form.checkout, form#order_review"),i=a("#pagarme-checkout-params",h);return c=new PagarMeCheckout.Checkout({encryption_key:wcPagarmeParams.encryptionKey,success:function(b){g=!0,a("input[name=pagarme_checkout_token]",h).remove(),h.append(a('<input name="pagarme_checkout_token" type="hidden" />').val(b.token)),h.submit()}}),d=wcPagarmeParams.checkoutPayPage?wcPagarmeParams.customerFields:e(h),f=a.extend({},{paymentMethods:"credit_card",customerData:!1,amount:i.data("total"),createToken:!0,interestRate:wcPagarmeParams.interestRate,maxInstallments:i.data("max_installment"),freeInstallments:wcPagarmeParams.freeInstallments,postbackUrl:wcPagarmeParams.postbackUrl,uiColor:wcPagarmeParams.uiColor},d),c.open(f),!1}var g=!1;a("form.checkout").on("click","#place_order",function(){return f()}),a("form.checkout").on("checkout_place_order_pagarme-credit-card",{preservePagarmeCheckoutSubmitValue:!0},b),a("form#order_review").submit(function(){return f()})})}(jQuery);